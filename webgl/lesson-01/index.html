<html lang="zh-CN">

<head>
<title>lesson-01 triangle and square</title>
<meta charset="UTF-8" />
</head>
<body>
    <canvas id="mytest" width=500, height=500 style="border:none"> </canvas>
</body>

<script>
    function onWbStart(){
        var canvas = document.getElementById("mytest");
        initGL();
        initShaders();
        initBuffers();
        gl.clearColor(0.0, 0.0, 0.0, 1.0);
        gl.enable(gl.DEPTH_TEST);
        drawScene();
    }

    function initGL(){
    }

    function initShaders(){
        
    }

    var triangleVertexPositionBuffer;
    var squareVertexPositionBuffer;
    function initBuffers(){
        triangleVertexPositionBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, triangleVertexPositionBuffer);
        var vertices = [
            0.0, 1.0, 0.0,
            -1.0, -1.0, -0.0,
            1.0, -1.0, 0.0,            
        ]

        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
        triangleVertexPositionBuffer.itemSize = 3;
        triangleVertexPositionBuffer.numItems = 3;

        squareVertexPositionBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, squareVertexPositionBuffer);
        vertices =[
            1.0, 1.0, 0.0,
            -1.0, 1.0, 0.0,
            1.0, -1.0, 0.0,
            -1.0, -1.0, 0.0,
        ];
        gl.bindData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
        squareVertexPositionBuffer.itemSize =3;
        squareVertexPositionBuffer.numItems = 4;
    }

    function drawScene(){
        gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight)
        gl.clear(gl.COLOR_BUFFER_BIT| gl.DEPTH_BUFFER_BIT)

        mat4.perspective(45, gl.viewportWidth/ gl.viewportHeight, 0.1, 100.0, pMatrix);
    }
</script>
</html>